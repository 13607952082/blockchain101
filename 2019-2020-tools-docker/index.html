<!doctype html><html lang=zh-cn><head><meta charset=utf-8><title>Docker使用帮助</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="2019-2020春季学期第1周课程安排"><meta name=author content="TaibiaoGuo"><meta name=generator content="Hugo 0.67.0"><link rel=stylesheet href=https://taibiaoguo.gitee.io/blockchain101/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://taibiaoguo.gitee.io/blockchain101/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://taibiaoguo.gitee.io/blockchain101/scss/style.min.css media=screen><link rel="shortcut icon" href=https://taibiaoguo.gitee.io/blockchain101/images/favicon.png type=image/x-icon><link rel=icon href=https://taibiaoguo.gitee.io/blockchain101/images/favicon.png type=image/x-icon><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','\tGTM-M88J7C2');</script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div class=preloader><img src=/blockchain101/images/logo.svg alt=preloader></div><header class="fixed-top navigation"><div class=container><nav class="navbar navbar-expand-lg navbar-light bg-transparent"><a class=navbar-brand href=https://taibiaoguo.gitee.io/blockchain101/><img class=img-fluid src=/blockchain101/images/logo.svg alt="区块链技术及应用发展 | Blockchain 101"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class="ti-menu h3"></i></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://taibiaoguo.gitee.io/blockchain101/>Home</a></li></ul><div class=search><button id=searchOpen class=search-btn><i class=ti-search></i></button><div class=search-wrapper><form action=https://taibiaoguo.gitee.io/blockchain101//search class=h-100><input class="search-box px-4" id=search-query name=s type=search placeholder="Type & Hit Enter..."></form><button id=searchClose class=search-close><i class="ti-close text-dark"></i></button></div></div></div></nav></div></header><div class="py-5 d-none d-lg-block"></div><section class=section><div class=container><div class=row><div class="col-lg-8 mx-auto block shadow mb-5"><h2>Docker使用帮助</h2><div class="mb-3 post-meta"><a href=/blockchain101/author/></a>,
16/20/2020,
<a href=/blockchain101/categories/2019-2020%e6%98%a5%e5%ad%a3%e5%ad%a6%e6%9c%9f>2019 2020春季学期</a>
<a href=/blockchain101/categories/%e8%af%be%e7%a8%8b%e5%ae%89%e6%8e%92>课程安排</a></div><div class="content mb-5"><p>在本课程的实验课程代码和工具都使用docker进行了打包，以方便学习和复现。</p><blockquote><p>为了使用docker，首先需要安装并配置docker，并开通阿里云镜像仓库并设置密码，见第下文<code>docker安装和配置</code>部分。</p></blockquote><h4 id=名词解释>名词解释</h4><p>本文中出现的你可能不理解的名词的简单解释
|名词 |解释 |
| &mdash;|&mdash; |
|docker | 运行和维护容器的一个软件，可以为我们课堂提供可重复实验的统一环境|
|容器|类似于虚拟机的虚拟化技术|
|镜像|打包好的容器|
| 镜像仓库|存放制作好的镜像的服务 |
|仓库镜像|镜像仓库的镜像，可以加速镜像的下载速度|
|终端|就是可以登陆你服务器后的黑框框|</p><h3 id=docker命令备忘>docker命令备忘</h3><p>下面列表中的命令囊括了你在课程中所需的所有命令：</p><pre><code>docker pull [容器名]        # 从仓库拉取一个容器
docker run [镜像名称]       # 启动容器
docker ps                   # 列出正在运行的容器
docker ps -a                # 列出所有容器（包含已停止的） 
docker stop [容器ID]        # 停止一个容器
docker rm [容器ID]          # 删除一个容器（需要先停止容器）
docker images               # 列出所有镜像
docker login [账号] [仓库]    # 登陆阿里云镜像仓库
</code></pre><h3 id=docker安装和配置>docker安装和配置</h3><h4 id=1docker安装和配置>1、docker安装和配置</h4><ul><li>安装docker(约3-10分钟)，复制以下命令到终端并按回车执行：</li></ul><pre><code>curl -sSL https://get.daocloud.io/docker | sh
</code></pre><ul><li>检查docker是否正确安装，复制以下命令到终端并按回车执行：</li></ul><pre><code>docker version
</code></pre><p>若正确安装，则屏幕上会显示类似画面（若未正确安装，请直接联系老师）：</p><pre><code>root@iZ2zej14gd1joysruzdtk8Z:~# docker version
Client: Docker Engine - Community
 Version:           19.03.7
 API version:       1.40
 Go version:        go1.12.17
 Git commit:        7141c199a2
 Built:             Wed Mar  4 01:22:36 2020
 OS/Arch:           linux/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          19.03.7
  API version:      1.40 (minimum version 1.12)
  Go version:       go1.12.17
  Git commit:       7141c199a2
  Built:            Wed Mar  4 01:21:08 2020
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.2.13
  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429
 runc:
  Version:          1.0.0-rc10
  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd
 docker-init:
  Version:          0.18.0
  GitCommit:        fec3683
</code></pre><ul><li>因为众所周知的网络原因，我们需要为docker添加仓库镜像，分别复制以下命令到终端并按回车执行：</li></ul><pre><code>sudo mkdir -p /etc/docker
</code></pre><pre><code>sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'
{
  &quot;registry-mirrors&quot;: [
    &quot;https://dockerhub.azk8s.cn&quot;,
    &quot;https://hub-mirror.c.163.com&quot;
  ]
}
EOF
</code></pre><pre><code>sudo systemctl daemon-reload
</code></pre><pre><code>sudo systemctl restart docker
</code></pre><ul><li>至此，docker的安装和配置完成，为了保险，你还可以尝试拉取一个镜像测试以下速度，复制以下命令到终端并按回车执行：</li></ul><pre><code>docker pull ubuntu
</code></pre><p>如果很快（5s-20s)下载完成（～60MB），则说明镜像配置成功，docker的安装和配置过程完成。</p><h4 id=2阿里云镜像仓库注册和设置固定密码和登陆>2、阿里云镜像仓库注册和设置固定密码和登陆</h4><p>完成了docker的安装和配置后，我们进行阿里云镜像仓库的注册和设置固定密码步骤。</p><p>打包好的实验容器存储在阿里云镜像仓库中，因此你先开通阿里云镜像仓库服务，具体为：</p><ul><li><p>登陆阿里云官网，在最上方的搜索框输入 <code>容器镜像服务</code>进行搜索，选择立即开通进入容器镜像服务<figure><img src=/blockchain101/images/post/2019-2020-tools-docker/tools-docker-search.png width=100%></figure></p></li><li><p>进入容器镜像服务页面后，选择菜单中的访问凭证，以获取凭证<figure><img src=/blockchain101/images/post/2019-2020-tools-docker/tools-docker-mainpage.png width=100%></figure></p></li><li><p>点击设置固定密码，设置一个docker镜像仓库的登陆密码</p></li><li><p>设置完成固定密码后，按照访问凭证页面登陆实例中的提示，在终端中复制其提示的命令并回车：</p></li></ul><blockquote><p>注意1:$号无需复制！</p><p>注意2: 每个人账号不同，请复制你的访问凭证页面所给出的账号！<figure><img src=/blockchain101/images/post/2019-2020-tools-docker/tools-docker-cmdlogin.png width=100%></figure></p></blockquote><ul><li>设置完成后，为了测试是否设置正确，下载我们课程的<code>hello_blockchain</code>镜像以测试,在终端中复制其提示的命令并回车:</li></ul><pre><code>docker run --rm registry.cn-shenzhen.aliyuncs.com/blockchain101/hello_blockchain
</code></pre><p>若成功，则在终端会显示<code>blockchain 101</code>的字符画并退出。</p><hr><p>本作品采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可。</p></div></div></div></div></section><footer class="py-4 bg-light border-top"><div class=container><div class="row justify-content-between align-items-center"><div class="col-lg-4 text-center text-lg-left mb-4 mb-lg-0"><a href=https://taibiaoguo.gitee.io/blockchain101/ class="d-block pb-3"><img src=/blockchain101/images/logo.svg class=img-fluid alt="区块链技术及应用发展 | Blockchain 101"></a></div><div class="col-lg-4 text-center mb-4 mb-lg-0"><ul class="list-inline mb-0"></ul></div><div class="col-lg-4 text-lg-right text-center mb-4 mb-lg-0"><ul class="list-inline social-icon mb-0"><li class=list-inline-item><a href=https://gitee.com/taibiaoguo/blockchain101><i class=ti-github></i></a></li></ul></div></div><div class="text-center mt-4"><span>© 2020 <a href=https://github.com/TaibiaoGuo>TaibiaoGuo</a> All Rights Reserved</span></div></div></footer><script>var indexURL="https://taibiaoguo.gitee.io/blockchain101/index.json"</script><script src=https://taibiaoguo.gitee.io/blockchain101/plugins/jQuery/jquery.min.js></script><script src=https://taibiaoguo.gitee.io/blockchain101/plugins/bootstrap/bootstrap.min.js></script><script src=https://taibiaoguo.gitee.io/blockchain101/plugins/search/fuse.min.js></script><script src=https://taibiaoguo.gitee.io/blockchain101/plugins/search/mark.js></script><script src=https://taibiaoguo.gitee.io/blockchain101/plugins/search/search.js></script><script src=https://taibiaoguo.gitee.io/blockchain101/js/script.min.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-158584793-2','auto');ga('send','pageview');</script></body></html>